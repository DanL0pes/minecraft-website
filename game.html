<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game | Minecave</title>
    <link rel="stylesheet" href="./assets/css/styleDefault.css">
    <link rel="stylesheet" href="./assets/css/styleGame.css">
</head>
<body>
    <nav class="transparent">
        <div class="container">
            <a href="index.html">
                <img src="./assets/images/logo.png" alt="MineCave">
            </a>
            <ul class="links">
                <li class="link btn"><a href="#">Sobre</a></li>
                <li class="link btn"><a href="game.html">Craftgame</a></li>
                <li class="link btn"><a href="#">Curiosidades</a></li>
                <li class="btn entrar"><a href="#">Entrar</a></li>
            </ul>
        </div>
    </nav>
    <section class="sessao-crafting-game">
        <div class="container">
            <div class="game-display">
                <div class="crafting">
                    <div class="game">
                        <h1 class="titulo">Crafting Game</h1>
                        <div class="display-craft" id="itemDisplay">
                            <div class="row">
                                <p class="item_frame" id="item_1" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio"></p>
                                <p class="item_frame" id="item_2" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                                <p class="item_frame" id="item_3" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                            </div>
                            <div class="row">
                                <p class="item_frame" id="item_4" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                                <p class="item_frame" id="item_5" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                                <p class="item_frame" id="item_6" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                            </div>
                            <div class="row">
                                <p class="item_frame" id="item_7" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                                <p class="item_frame" id="item_8" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                                <p class="item_frame" id="item_9" ondrop="drop(event)" ondragover="permitirDrop(event)">
                                    <img src="./assets/images/Vazio.png" draggable="true" id="vazio">
                                </p>
                            </div>
                        </div>
                        <button onclick="check()">Check</button>
                    </div>
                    <div id="img_res"></div>
                </div>

                <div class="tentativas">
                    <div id="div_tentativa"></div>
                </div>
            </div>
            <div class="items-box">
                
                <img src="./assets/images/Cobblestone.png" draggable="true" id="cobblestone" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Stick.png" draggable="true" id="stick" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Iron.png" draggable="true" id="iron" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Diamond.png" draggable="true" id="diamond" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Gold.png" draggable="true" id="gold" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Coal.png" draggable="true" id="coal" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Oak_Planks.png" draggable="true" id="oak_planks" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Redstone.png" draggable="true" id="redstone" ondragstart="inicioDrag(event)">
                <img src="./assets/images/Vazio.png" draggable="true" id="vazio" ondragstart="inicioDrag(event)">
            </div>

        </div>


    </section>
</body>

<script>
    const itemFrames = document.querySelectorAll(".item_frame");
    let itemPos = 0;
    const items = []
    let contagem = 1;
    let status = 'jogando';

    // Arrastar e Soltar Item
    function inicioDrag(event) {
        event.dataTransfer.setData("text", event.target.src);
        this.style.opacity = 0;
    }
    function permitirDrop(event) {
        event.preventDefault();
    }
    function drop(event){
        event.preventDefault();
        const target = event.target;
        target.src = event.dataTransfer.getData("text");
    }

    // Check Resposta
    function check(){
        if(contagem == 1){
            div_tentativa.style.display = "flex";
        }

        const corErradoCraft = '#ec7c7c';
        const corCertoCraft = '#81e9b0';
        let corretoFrase = '';
        let qtdeCorreto = 0;

        if(status == 'fim'){
            return;
        }
        
        if(items[0] != 'cobblestone'){
            item_1.style.backgroundColor = corErradoCraft;
        } else{
            item_1.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[1] != 'cobblestone'){
            item_2.style.backgroundColor = corErradoCraft;
        } else{
            item_2.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[2] != 'cobblestone'){
            item_3.style.backgroundColor = corErradoCraft;
        } else{
            item_3.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[3] != null){
            item_4.style.backgroundColor = corErradoCraft;
        } else{
            item_4.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[4] != 'stick'){
            item_5.style.backgroundColor = corErradoCraft;
        } else{
            item_5.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[5] != null){
            item_6.style.backgroundColor = corErradoCraft;
        } else{
            item_6.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[6] != null){
            item_7.style.backgroundColor = corErradoCraft;
        } else{
            item_7.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[7] != 'stick'){
            item_8.style.backgroundColor = corErradoCraft;
        } else{
            item_8.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        if(items[8] != null){
            item_9.style.backgroundColor = corErradoCraft;
        } else{
            item_9.style.backgroundColor = corCertoCraft;
            qtdeCorreto++;
        }
        
        if(qtdeCorreto == 9){
            corretoFrase = `<b>Crafting Correto!</b>`
            img_res.style.backgroundColor = '#81e9b0';
        }

        div_tentativa.innerHTML += `
        <div class='tentativa'>
            <h3>Tentativa ${contagem}:</h3>
            <p>Corretos: ${qtdeCorreto}</p>
            <p>Incorretos: ${9-qtdeCorreto}</p>
            ${corretoFrase}
        </div>
        `;
        if(contagem == 5 || qtdeCorreto == 9){
            div_tentativa.innerHTML += `
            <div class='tentativa'>
                <h2>Jogo Finalizado!</h2>
            </div>
            `;
            status = 'fim';
            img_res.innerHTML = `
            <img src="./assets/images/stone_pickaxe.webp">
            `;
            return;
        }
        itemPos = 0;
        atualizarDisplay();
        
        contagem++;
    }
</script>
</html>